# Структура шаблонов генератора

В этой директории находятся шаблоны для генерации Go микросервисов.

## Реорганизованная структура (`microservices/`)

Директория `microservices/` содержит шаблоны, организованные согласно структуре, описанной в файле `genGuide`. Эта структура отражает окончательную структуру сгенерированного проекта и облегчает понимание того, какие шаблоны за что отвечают.

### Основная структура шаблонов:

```
microservices/
├── api/
│   ├── graphql/              # GraphQL схемы
│   └── grpc/                 # gRPC определения
├── build/
│   ├── config/               # Конфигурация сборки
│   └── docker/               # Docker-файлы
├── cmd/                      # Точки входа в приложение
├── config/                   # Конфигурация приложения
├── internal/
│   ├── app/                  # Ядро приложения
│   ├── database/             # Работа с БД
│   │   ├── default_repo/     # Репозитории
│   │   └── models/           # Модели данных
│   ├── graphql/              # Обработчики GraphQL
│   ├── grpc/                 # Обработчики gRPC
│   └── service/              # Бизнес-логика
├── pkg/                      # Публичные пакеты
│   └── api/
│       ├── graphql/          # Сгенерированный GraphQL код
│       └── grpc/             # Сгенерированный gRPC код
└── tools/                    # Инструменты для генерации кода
```

### Зависимости файлов:

1. **Статичные файлы** - генерируются всегда:
   - `.gitignore`, `go.mod`, `go.sum`
   - `README.md`, `VERSION`, `Makefile`
   - `cmd/main.go`, `build/docker/Dockerfile`

2. **Динамичные файлы** - генерируются в зависимости от конфигурации:
   - `api/graphql/*` - только при наличии GraphQL эндпоинтов
   - `api/grpc/*` - только при наличии gRPC эндпоинтов
   - `internal/database/*` - только при наличии базы данных
   - `tools/*` - только при наличии GraphQL


## Добавление новых шаблонов

При добавлении новых шаблонов следуйте рекомендациям:

1. Разместите файл шаблона в соответствующей директории согласно структуре `genGuide`
2. Используйте суффикс `.tmpl` для файлов шаблонов
3. При необходимости, обновите логику фильтрации файлов в `EnvironmentFilter`

## Тестирование шаблонов

Для тестирования шаблонов выполните:

```bash
go test ./... -v
``` 