# User-Posts Demo Service

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å–µ—Ä–≤–∏—Å –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –∏—Ö –ø–æ—Å—Ç–∞–º–∏ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π gRPC –∏ GraphQL API.

## –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ ID –≤–º–µ—Å—Ç–µ —Å –µ–≥–æ –ø–æ—Å—Ç–∞–º–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

### –ü–æ—Å—Ç—ã:
- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ—Å—Ç–∞ –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç–∞ –ø–æ ID
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞
- –£–¥–∞–ª–µ–Ω–∏–µ –ø–æ—Å—Ç–∞

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- Go 1.23+
- gRPC/Protocol Buffers
- GraphQL
- PostgreSQL —Å GORM (ORM)
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏ –∏–∑ go-init-common

## –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º üåê

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç:
- **Linux/macOS**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `Makefile`
- **Windows**: –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `build.ps1` PowerShell —Å–∫—Ä–∏–ø—Ç

> **–î–ª—è Windows –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**: –°–º. [README-Windows.md](./README-Windows.md) –¥–ª—è –ø–æ–¥—Ä–æ–±–Ω—ã—Ö –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–π

## –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Go 1.23 –∏–ª–∏ –≤—ã—à–µ
- Docker –∏ Docker Compose (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ PostgreSQL)
- protoc (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ gRPC –∫–æ–¥–∞)
- gqlgen (–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ GraphQL –∫–æ–¥–∞)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

#### Linux/macOS üêßüçé

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
```bash
git clone <repository-url>
cd {{ .Name }}
```

2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞):
```bash
make init
```

3. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```bash
docker-compose up -d postgres
```

4. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞:
```bash
make run
```

#### Windows ü™ü

1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:
```powershell
git clone <repository-url>
cd {{ .Name }}
```

2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ–¥–∞):
```powershell
.\build.ps1 init
```

3. –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö:
```powershell
docker-compose up -d postgres
```

4. –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–∞:
```powershell
.\build.ps1 run
```

### –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| Linux/macOS | Windows | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|---------|----------|
| `make init` | `.\build.ps1 init` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è (GraphQL + gRPC –≥–µ–Ω–µ—Ä–∞—Ü–∏—è) |
| `make build` | `.\build.ps1 build` | –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞ |
| `make run` | `.\build.ps1 run` | –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ |
| `make test` | `.\build.ps1 test` | –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤ |
| `make lint` | `.\build.ps1 lint` | –õ–∏–Ω—Ç–∏–Ω–≥ –∫–æ–¥–∞ |
| `make format` | `.\build.ps1 format` | –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞ |
| `make clean` | `.\build.ps1 clean` | –û—á–∏—Å—Ç–∫–∞ Docker –∫—ç—à–∞ |

## API

### gRPC API

–°–µ—Ä–≤–∏—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç gRPC API –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ –∏ –ø–æ—Å—Ç–∞–º–∏:

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
grpcurl -plaintext -d '{"email":"user@example.com", "name":"Test User"}' localhost:50051 demo.UserService/CreateUser

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
grpcurl -plaintext -d '{"id":"123e4567-e89b-12d3-a456-426614174000"}' localhost:50051 demo.UserService/GetUser
```

### GraphQL API

–°–µ—Ä–≤–∏—Å —Ç–∞–∫–∂–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç GraphQL API, –¥–æ—Å—Ç—É–ø–Ω—ã–π –ø–æ URL http://localhost:8080/graphql.

–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤:

```graphql
# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
mutation {
  createUser(email: "user@example.com", name: "Test User") {
    id
    email
    name
  }
}

# –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
query {
  user(id: "123e4567-e89b-12d3-a456-426614174000") {
    id
    email
    name
    posts {
      id
      title
      content
    }
  }
}
```

## –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Ñ–∞–π–ª `build/config/config.yml` –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

| –ü–µ—Ä–µ–º–µ–Ω–Ω–∞—è –æ–∫—Ä—É–∂–µ–Ω–∏—è | –û–ø–∏—Å–∞–Ω–∏–µ | –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é |
|----------------------|----------|------------------------|
| DATABASE_HOST        | –•–æ—Å—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | localhost |
| DATABASE_PORT        | –ü–æ—Ä—Ç –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | 5432 |
| DATABASE_USER        | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ë–î | postgres |
| DATABASE_PASSWORD    | –ü–∞—Ä–æ–ª—å | postgres |
| DATABASE_NAME        | –ò–º—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö | users_posts_demo |
| HTTP_PORT            | –ü–æ—Ä—Ç HTTP —Å–µ—Ä–≤–µ—Ä–∞ | 8080 |
| GRPC_PORT            | –ü–æ—Ä—Ç gRPC —Å–µ—Ä–≤–µ—Ä–∞ | 50051 |
| LOG_LEVEL            | –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è | debug |

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ api/                # API –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è (proto, graphql —Å—Ö–µ–º—ã)
‚îú‚îÄ‚îÄ build/              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–±–æ—Ä–∫–∏ –∏ Docker
‚îú‚îÄ‚îÄ cmd/                # –¢–æ—á–∫–∏ –≤—Ö–æ–¥–∞
‚îú‚îÄ‚îÄ config/             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ internal/           # –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ app/            # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îú‚îÄ‚îÄ database/       # –í–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ graphql/        # GraphQL —Å–µ—Ä–≤–∏—Å
‚îÇ   ‚îú‚îÄ‚îÄ grpc/           # gRPC —Å–µ—Ä–≤–∏—Å 
‚îÇ   ‚îî‚îÄ‚îÄ service/        # –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ pkg/                # –ü—É–±–ª–∏—á–Ω—ã–µ –ø–∞–∫–µ—Ç—ã
‚îî‚îÄ‚îÄ tools/              # –ò–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

## –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Ä–µ—à–µ–Ω–∏—é

–°–µ—Ä–≤–∏—Å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—É —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º –Ω–∞ —Å–ª–æ–∏:
- **–°–ª–æ–π API** (GraphQL –∏ gRPC) - –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –ø—Ä–∏–µ–º –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
- **–°–µ—Ä–≤–∏—Å–Ω—ã–π —Å–ª–æ–π** - —Å–æ–¥–µ—Ä–∂–∏—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É
- **–°–ª–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è** - –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º –¥–∞–Ω–Ω—ã—Ö

–¢–∞–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –µ–¥–∏–Ω—É—é –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –¥–ª—è —Ä–∞–∑–ª–∏—á–Ω—ã—Ö API (GraphQL –∏ gRPC) –∏ —É–ø—Ä–æ—â–∞–µ—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É –∫–æ–¥–∞.
